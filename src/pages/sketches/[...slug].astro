---
import SketchLayout from "@/src/layouts/SketchLayout.astro";
import { getCurationSketches } from "@src/api/OpenProcessing";

export async function getStaticPaths() {
  const sketches = await getCurationSketches();
  return sketches.filter(sketch => sketch.visualID && typeof sketch.visualID === 'number').map((sketch) => ({
    // Even though slug gets converted to string at runtime,
    // TypeScript infers it as number from sketch.visualID, so we explicitly convert to string.
    params: { slug: String(sketch.visualID) },
    props: { authorName: sketch.fullname },
  }));
}

const { slug } = Astro.params;
const { authorName } = Astro.props;
---

<SketchLayout sketchId={slug} authorName={authorName} />
