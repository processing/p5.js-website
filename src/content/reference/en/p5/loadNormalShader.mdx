---
title: loadNormalShader
module: 3D
submodule: p5.strands
file: src/webgl/material.js
description: >
  <p>Loads a new shader from a file that can change how fills are drawn, based
  on the material used

  when <a href="/reference/p5/normalMaterial/"><code>normalMaterial()</code></a>
  is active. Pass the resulting

  shader into the <a href="/reference/p5/shader/"><code>shader()</code></a>
  function to apply it

  to any fills you draw.</p>

  <p>Since this function loads data from another file, it returns a
  <code>Promise</code>.

  Use it in an <code>async function setup</code>, and <code>await</code> its
  result.</p>

  <pre><code class="language-js">let myShader;

  async function setup() {
    createCanvas(200, 200, WEBGL);
    myShader = await loadNormalShader('myMaterial.js');
  }


  function draw() {
    background(255);
    shader(myShader);
    myShader.setUniform('time', millis());
    lights();
    noStroke();
    fill('red');
    sphere(50);
  }</code></pre><p>Inside your shader file, you can call p5.strands hooks to
  change parts of the shader. For

  example, you might use the <code>worldInputs</code> hook to change each
  vertex, or you

  might use the <code>finalColor</code> hook to change the color of each pixel
  on the surface of a shape.</p>

  <pre><code class="language-js">// myMaterial.js

  let time = uniformFloat();

  worldInputs.begin();

  worldInputs.position.y +=
    20 * sin(time * 0.001 + worldInputs.position.x * 0.05);
  worldInputs.end();</code></pre><p>Read the reference for <a
  href="/reference/p5/buildNormalShader/"><code>buildNormalShader</code></a>,

  the version of <code>loadNormalShader</code> that takes in a function instead
  of a separate file,

  for a full list of hooks you can use and examples for each.</p>

  <p>The second parameter, <code>successCallback</code>, is optional. If a
  function is passed, as in

  <code>loadNormalShader('myShader.js', onLoaded)</code>, then the
  <code>onLoaded()</code> function will be called

  once the shader loads. The shader will be passed to <code>onLoaded()</code> as
  its only argument.

  The return value of <code>handleData()</code>, if present, will be used as the
  final return value of

  <code>loadNormalShader('myShader.js', onLoaded)</code>.</p>
line: 1814
isConstructor: false
itemtype: method
example: []
class: p5
return:
  description: The normal shader.
  type: Promise<p5.Shader>
overloads:
  - params:
      - name: url
        description: The URL of your p5.strands JavaScript file.
        type: String
      - name: onSuccess
        description: A callback function to run when loading completes.
        optional: 1
        type: Function
      - name: onFailure
        description: A callback function to run when loading fails.
        optional: 1
        type: Function
    return:
      description: The normal shader.
      type: Promise<p5.Shader>
chainable: false
beta: true
---


# loadNormalShader
