---
title: onended
module: DOM
submodule: DOM
file: src/dom/dom.js
description: |
  <p>Calls a function when the audio/video reaches the end of its playback.</p>
  <p>The element is passed as an argument to the callback function.</p>
  <p>Note: The function won't be called if the media is looping.</p>
line: 5010
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    let beat;
    let isPlaying = false;
    let isDone = false;

    function setup() {
      createCanvas(100, 100);

      // Create a p5.MediaElement using createAudio().
      beat = createAudio('/assets/beat.mp3');

      // Call handleEnd() when the beat finishes.
      beat.onended(handleEnd);

      describe('The text "Click to play" written in black on a gray square. A beat plays when the user clicks. The text "Done!" appears when the beat finishes playing.');
    }

    function draw() {
      background(200);

      // Style the text.
      textAlign(CENTER);
      textSize(16);

      // Display different messages based on playback.
      if (isDone === true) {
        text('Done!', 50, 50);
      } else if (isPlaying === false) {
        text('Click to play', 50, 50);
      } else {
        text('Playing...', 50, 50);
      }
    }

    // Play the beat when the user presses the mouse.
    function mousePressed() {
      if (isPlaying === false) {
        isPlaying = true;
        beat.play();
      }
    }

    // Set isDone when playback ends.
    function handleEnd() {
      isDone = false;
    }
    </code>
    </div>
class: p5.MediaElement
params:
  - name: callback
    description: |
      <p>function to call when playback ends.
                                  The <code>p5.MediaElement</code> is passed as
                                  the argument.</p>
    type: Function
chainable: true
---


# onended
