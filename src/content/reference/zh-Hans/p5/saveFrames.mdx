---
title: saveFrames
module: 图像
submodule: 图像
file: src/image/image.js
description: |2-

  <p>从画布中捕获一系列帧，可以另存为图片。</p>

  <p><code>saveFrames()</code> 创建一个帧对象数组。每一帧存储为一个对象，其文件类型、文件名和图像数据为字符串。例如，第一个保存的帧可以具有以下属性：</p>

  <p><code>{ ext: "'png', filename: 'frame0', imageData:"
 "'data":"image/octet-stream;base64, abc123'}</code>。</p>"


 "<p>第一个参数<code>filename</code>设置文件的前缀名称。例如，将前缀设置为 <code>'frame'</code> 会生成图像"
  文件<code>frame0.png</code>、<code>frame1.png</code> 等。</p>

  <p>第二个参数<code>extension</code>将文件类型设置为
 "<code>'png'</code> 或 <code>'jpg'</code>.</p>"


  <p>第三个参数<code>duration</code>设置录制时间，以秒计算。

  最长持续时间为 15 秒。</p>

  <p>第四个参数<code>framerate</code>，设置每秒录制帧数。最大帧速率值为 22。有限制<code>duration</code>和 <code>framerate</code> 以避免使用过多内存。录制大画布很容易使绘图甚至网络浏览器崩溃。</p>

  <p>第五个参数，<code>callback</code>，是可选的。如果传入回调函数，
  在默认情况下，系统不会保存图像文件。我们可以通过这个回调函来处理这个数组里的所有数据。它包含了所有捕捉到的帧，每一帧也包含了具有三个属性的对象：<code>imageData</code>、<code>filename</code>和
  <code>extension</code>。</p>


  <p>注意：在默认情况下，帧会作为单独的图像文件下载。</p>
line: '558'
isConstructor: 'false'
itemtype: method
example:
  - |2-



  <div>


  <code>


  function setup() {

 "createCanvas(100, 100);"



 "describe('A square repeatedly changes color from blue to pink.');"

  }




  function draw() {

 "let r = frameCount % 255;"

 "let g = 50;"

 "let b = 100;"

 "background(r, g, b);"

  }




 "// Save the frames when the user presses the 's' key."


  function keyPressed() {

 "if (key === 's') {"

 "saveFrames('frame', 'png', 1, 5);"

    }

  }


  </code>


  </div>




  <div>


  <code>


  function setup() {

 "createCanvas(100, 100);"



 "describe('A square repeatedly changes color from blue to pink.');"

  }




  function draw() {

 "let r = frameCount % 255;"

 "let g = 50;"

 "let b = 100;"

 "background(r, g, b);"

  }




  // Print 5 frames when the user presses the mouse.


  function mousePressed() {

 "saveFrames('frame', 'png', 1, 5, printFrames);"

  }




  // Prints an array of objects containing raw image data, filenames, and
  extensions.


  function printFrames(frames) {

    for (let frame of frames) {

 "print(frame);"

    }

  }


  </code>


  </div>
class: p5
params:
  - name: filename
  description: |2-

    <p>文件名前缀。</p>
  type: 字符串
  - name: extension
  description: |2-

    <p>文件扩展名，“jpg” 或 “png”。</p>
  type: 字符串
  - name: duration
  description: |2-

    <p>录制的持续时间以秒为单位。该参数将被限制为小于或等于 15。</p>
  type: 数字
  - name: framerate
  description: |2-

    <p>每秒保存的帧数。该参数将被限制为小于或等于 22。</p>
  type: 数字
  - name: callback
  description: |2-

    <p>回调函数将被用来处理图像数据。这个函数应该接受一个数组作为参数。这数组将包含指定数量对象的帧。每个对象有三个属性：<code>imageData</code>、<code>filename</code>和<code>extension</code>。</p>
  type: 函数(数组)
  optional: 'true'
chainable: 'false'
---

# saveFrames
