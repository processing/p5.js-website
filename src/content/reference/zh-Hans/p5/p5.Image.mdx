---
title: p5.Image
module: 图像
submodule: 图像
file: src/image/p5.Image.js
description: |2-

  <p>描述图像的类。</p>


  <p>图像是可以显示和修改的矩形像素网格。</p>


  <p>现有图像可以通过调用 <a href="/reference/p5/loadImage">loadImage()</a> 加载。空白图像可以通过
  调用 <a href="/reference/p5/createImage">createImage()</a>创建。
  <code>p5.Image</code> 对象包含常见的图像操作方式，例如使用滤镜和修改像素值。</p>
line: '21'
isConstructor: 'true'
params:
  - name: width
    description: ''
    type: 数字
  - name: height
    description: ''
    type: 数字
example:
  - |-

    <div>
    <code>
    let img;

    // Load the image.
    function preload() {
      img = loadImage('/assets/bricks.jpg');
    }

    function setup() {
      createCanvas(100, 100);

      // Display the image.
      image(img, 0, 0);

      describe('An image of a brick wall.');
    }
    </code>
    </div>

    <div>
    <code>
    let img;

    // Load the image.
    function preload() {
      img = loadImage('/assets/bricks.jpg');
    }

    function setup() {
      createCanvas(100, 100);

      // Apply the GRAY filter.
      img.filter(GRAY);

      // Display the image.
      image(img, 0, 0);

      describe('A grayscale image of a brick wall.');
    }
    </code>
    </div>

    <div>
    <code>
    function setup() {
      createCanvas(100, 100);

      background(200);

      // Create a p5.Image object.
      let img = createImage(66, 66);

      // Load the image's pixels.
      img.loadPixels();

      // Set the pixels to black.
      for (let x = 0; x < img.width; x += 1) {
        for (let y = 0; y < img.height; y += 1) {
          img.set(x, y, 0);
        }
      }

      // Update the image.
      img.updatePixels();

      // Display the image.
      image(img, 17, 17);

      describe('A black square drawn in the middle of a gray square.');
    }
    </code>
    </div>
methods:
  pixelDensity:
    description: |2-

      <p>获取或设置高像素密度显示器的像素密度。</p>

      <p>默认情况下，密度将设置为 1。</p>

      <p>不带参数调用此方法来获取默认密度，或者传递一个数字来设置密度。如果提供非正数，

      默认为 1。</p>
    path: p5.Image/pixelDensity
  loadPixels:
    description: |2-

      <p>将图像中每个像素的当前值加载到
      <code>img.pixels</code>


      数组。</p>


      <p><code>img.loadPixels()</code> 必须在读取或修改像素值之前调用。</p>
    path: p5.Image/loadPixels
  updatePixels:
    description: |2-

      <p>使用 <a href="/reference/p5.Image/pixels">img.pixels</a> 数组中的 RGBA 值更新画布。</p>


      <p>在更改 <a href="/reference/p5.Image/pixels">img.pixels</a> 数组后，才需要调用<code>img.updatePixels()</code>。

      在调用 <a href="/reference/p5.Image/loadPixels">img.loadPixels()</a> 或调用 <a href="/reference/p5.Image/set">img.set()</a> 后，可以直接更改。</p>

      <p>可选参数<code>x</code>、<code>y</code>、
      <code>width</code>和<code>height</code>定义要更新图像的子部分。在一些情况下，这样做可以提高性能。</p>

      <p>如果图像是从 GIF 加载的，调用
      <code>img.updatePixels()</code>将更新当前帧中的像素。</p>
    path: p5.Image/updatePixels
  get:
    description: |2-

      <p>从图像中获取一个像素或像素区域。</p>


      <p><code>img.get()</code> 很容易使用，但速度不如


      <a href="/reference/p5.Image/pixels">img.pixels</a>。使用


      <a href="/reference/p5.Image/pixels">img.pixels</a> 读取多个像素
      值。</p>


      <p>不带参数的 <code>img.get()</code> 版本会返回整个图像。</p>


      <p>带有两个参数的 <code>img.get()</code> 版本，例如在
      <code>img.get(10, 20)</code>中,
      可以将两个参数解释为坐标。它返回一个<code>[R、G、B、A]</code>定点像素值的数组。</p>


      <p>具有四个参数的 <code>img.get()</code> 版本，例如在


      <code>img,get(10, 20, 50, 90)</code>中，将四个参数解释为
      坐标和尺寸。前两个参数是分段左上角的坐标。最后两个参数是
      该分段的宽度和高度。它返回了新 <a href="/reference/p5/p5.Image">p5.Image</a> 对象中画布的一个分段。</p>

      <p>使用<code>img.get()</code>代替<a
      href="/reference/p5/get">get()</a> 来直接处理图像。</p>
    path: p5.Image/get
  set:
    description: |2-

      <p>设置图像中一个或多个像素的颜色。</p>


      <p><code>img.set()</code> 很容易使用，但速度不如


      <a href="/reference/p5.Image/pixels">img.pixels</a>。使用


      <a href="/reference/p5.Image/pixels">img.pixels</a> 设置多个像素
      值。</p>


      <p><code>img.set()</code> 将前两个参数解释为 x 和
      y 坐标。它


      将最后一个参数解释为灰度值，一个 <code>[R, G, B,
      A]</code> 像素


      数组、一个 <a href="/reference/p5/p5.Color">p5.Color</a> 对象或
      <a href="/reference/p5/p5.Image">p5.Image</a> 对象。</p>


      <p>使用<code>img.set()</code> 显示更改后，必须要调用<a href="/reference/p5.Image/updatePixels">img.updatePixels()</a>。</p>
    path: p5.Image/set
  resize:
    description: |2-

      <p>将图像大小调整为给定的宽度和高度。</p>


      <p>可以通过为任一参数<code>width</code>或<code>height</code> 传递 0，来保留图像的原始长宽比
      。例如，调用
      <code>img.resize(50, 0)</code>
      会让一张大小为 500 × 300 像素图片调整为 50 × 30 像素。</p>
    path: p5.Image/resize
  copy:
    description: |2-

      <p>将像素从源图像复制到此图像。</p>


      <p>第一个参数<code>srcImage</code>是可选的要复制的 <a href="/reference/p5/p5.Image">p5.Image</a> 对象。如果源
      图像没有通过，那么 <code>img.copy()</code> 就可以将该图像的某个区域复制到
      其他区域。</p>


      <p>接下来的四个参数，<code>sx</code>、<code>sy</code>、
      <code>sw</code> 和 <code>sh</code> 确定源图像复制区域。 <code>(sx, sy)</code> 是区域的左上角。 <code>sw</code> 和 <code>sh</code> 是区域的高度和宽度。</p>


      <p>接下来的四个参数，<code>dx</code>，<code>dy</code>，
      <code>dw</code>和<code>dh</code>确定复制此图像的区域。 <code>(dx, dy)</code> 是区域的左上角。 <code>dw</code> 和 <code>dh</code> 是区域的高度和宽度。</p>

      <p>如果源像素区域与目标区域大小不同，调用 <code>img.copy()</code> 缩放。</p>
    path: p5.Image/copy
  mask:
    description: |2-

      <p>用另一个图像遮盖图像的一部分。</p>


      <p><code>img.mask()</code> 使用另一个 <a
      href="/reference/p5/p5.Image">p5.Image</a> 对象的


      Alpha 通道作为该图像的 Alpha 通道。遮盖是累积的


      并且一旦应用就无法删除。</p>
    path: p5.Image/mask
  filter:
    description: |2-

      <p>对图像应用图像滤镜。</p>


      <p>预设选项是：</p>


      <p><code>INVERT</code>


      反转图像中的颜色。不使用任何参数。</p>


      <p><code>GRAY</code>


      将图像转换为灰度图像。不使用任何参数。</p>


      <p><code>THRESHOLD</code>


      将图像转换为黑白图像。具有灰度值的像素


      高于给定阈值的颜色将转换为白色。其余的都转换为黑色。阈值必须介于 0.0（黑色）和 1.0（白色）之间。如果没有指定阈值，使用0.5。</p>

      <p><code>OPAQUE</code>

      将 Alpha 通道设置为完全不透明。不使用任何参数。</p>


      <p><code>POSTERIZE</code>


      限制图像中的颜色数量。每个颜色通道仅限于


      指定的颜色数量。 2 到 255 之间的数量是有效的，但是数量越低，结果越显著。默认值为 4。</p>


      <p><code>BLUR</code>


      模糊图像。模糊程度由模糊半径指定。
      较大数量值会增加模糊度。默认值为 4。在 <code>P2D</code> 模式中，使用高斯模糊。 在<code>WEBGL</code> 模式中，使用框模糊。</p>


      <p><code>ERODE</code>


      减少光照区域。不使用任何参数。</p>


      <p><code>DILATE</code>


      增加光照区域。不使用任何参数。</p>
    path: p5.Image/filter
  blend:
    description: |2-

      <p>将另一幅图像中的像素区域复制到该图像中。</p>


      <p>第一个参数<code>srcImage</code>是


      <a href="/reference/p5/p5.Image">p5.Image</a> 对象进行混合。</p>


      <p>接下来的四个参数，<code>sx</code>，<code>sy</code>，
      <code>sw</code> 和 <code>sh</code> 确定源图像的混合区域。 <code>(sx, sy)</code> 是区域的左上角。 <code>sw</code> 和 <code>sh</code> 是区域的宽度和
      高度。</p>


      <p>接下来的四个参数，<code>dx</code>，<code>dy</code>，
      <code>dw</code>和<code>dh</code>确定要融入的画布区域。 <code>(dx, dy)</code> 是区域的左上角。 <code>dw</code> 和 <code>dh</code> 是区域的宽度和
      高度。</p>


      <p>第十个参数，<code>blendMode</code>，设置混合图像颜色的效果。选项有<code>BLEND</code>、<code>DARKEST</code>、
      <code>LIGHTEST</code>，<code>DIFFERENCE</code>，


      <code>MULTIPLY</code>、<code>EXCLUSION</code>、<code>SCREEN</code>、
      <code>REPLACE</code>、<code>OVERLAY</code>、<code>HARD_LIGHT</code>、


      <code>SOFT_LIGHT</code>、<code>DODGE</code>、<code>BURN</code>、
      <code>ADD</code>，或<code>NORMAL</code>。</p>
    path: p5.Image/blend
  save:
    description: |2-

      <p>将图像保存到文件。</p>


      <p>默认情况下，<code>img.save()</code> 将图像保存命名为 <code>untitled.png</code> 的PNG 图像。</p>


      <p>第一个参数<code>filename</code>是可选的。这是一个字符串设置的文件名。如果包含文件扩展名，例如
      "<code>img.save('drawing.png')</code>，则图像将使用这种方式保存。</p>"


      <p>第二个参数<code>扩展名</code>也是可选的。它设置
      文件格式。


      "可以使用 <code>'png'</code> 或 <code>'jpg'</code>。例如，"
      "<code>img.save('drawing', 'jpg')</code> 将画布保存到命名为 <code>drawing.jpg</code> 的文件。</p>"


      <p>注意：浏览器将立即保存文件或弹出对话窗口提示用户。</p>


      <p>如果图像来自 GIF 文件，图像只会下载为动画 GIF
      。请参阅 <a href="/reference/p5/saveGif">saveGif()</a> 来
      创建新的 GIF。</p>
    path: p5.Image/save
  reset:
    description: |2-

      <p>从第一帧重新播放 GIF 动画。</p>
    path: p5.Image/reset
  getCurrentFrame:
    description: |2-

      <p>从 GIF 动画获取当前帧的索引。</p>
    path: p5.Image/getCurrentFrame
  setFrame:
    description: |2-

      <p>在 GIF 动画中设置当前帧。</p>
    path: p5.Image/setFrame
  numFrames:
    description: |2-

      <p>在 GIF 动画中返回帧数。</p>
    path: p5.Image/numFrames
  play:
    description: |2-

      <p>播放因为 <a href="/reference/p5.Image/pause">img.pause()</a> 暂停的 GIF 动画。</p>
    path: p5.Image/play
  pause:
    description: |2-

      <p>暂停 GIF 动画。</p>

      <p>GIF 可以通过调用 <a href="/reference/p5.Image/play">img.play()</a> 来恢复。</p>
    path: p5.Image/pause
  delay:
    description: |2-

      <p>更改 GIF 动画中帧之间的延迟。</p>


      <p>第一个参数<code>delay</code>是延迟的毫秒长度。</p>


      <p>第二个参数<code>index</code>是可选的。如果提供的话，
      仅修改在<code>index</code> 帧的延迟。所有其他帧将保持他们的默认延迟。</p>
    path: p5.Image/delay
chainable: false
---

# p5.Image
