---
title: keyReleased
module: Events
submodule: 键盘
file: src/events/keyboard.js
description: >
  <p>当任何键被释放时调用一次的函数。</p>

  <p>声明函数<code>keyReleased()</code>会设置一个代码块，当用户释放任何键时，自动运行一次：</p>

  <code>

  function keyReleased() {
    // 要运行的代码。
  }

  </code>

  <p>当 p5.js 调用<code>keyReleased()</code>时，<a href="/reference/p5/key">key</a>和<a href="/reference/p5/keyCode">keyCode</a>变量将会更新为最近一次释放的值：</p>

  <code>

  function keyReleased() {
    if (key === 'c') {
      // 要运行的代码。
    }

  <p>  if (keyCode === ENTER) {
      // 要运行的代码。
    }
  }

  </p></code>

  <p>参数<code>event</code>是可选的。<code>keyReleased()</code>总是传递一个<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent" target="_blank">KeyboardEvent</a>对象，该对象带有描述按键事件的属性：</p>

  <code>

  function keyReleased(event) {
    // 使用事件运行的代码。
    console.log(event);
  }

  </code>

  <p>浏览器可能会对各种键盘事件附加默认行为。为了阻止这个事件的任何默认行为，在函数的末尾添加<code>return false;</code>。</p>
line: 461
isConstructor: false
itemtype: method
example:
  - |-

    <div>
    <code>
    // Click on the canvas to begin detecting key presses.

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        'A gray square with a black square at its center. The inner square changes color when the user releases a key.'
      );
    }

    function draw() {
      background(200);

      // Style the square.
      fill(value);

      // Draw the square.
      square(25, 25, 50);
    }

    // Toggle value when the user releases a key.
    function keyReleased() {
      if (value === 0) {
        value = 255;
      } else {
        value = 0;
      }
      // Uncomment to prevent any default behavior.
      // return false;
    }
    </code>
    </div>

    <div>
    <code>
    // Click on the canvas to begin detecting key presses.

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        'A gray square with a black square at its center. The inner square becomes white when the user releases the "w" key.'
      );
    }

    function draw() {
      background(200);

      // Style the square.
      fill(value);

      // Draw the square.
      square(25, 25, 50);
    }

    // Set value to 255 the user releases the 'w' key.
    function keyReleased() {
      if (key === 'w') {
        value = 255;
      }
      // Uncomment to prevent any default behavior.
      // return false;
    }
    </code>
    </div>

    <div>
    <code>
    // Click on the canvas to begin detecting key presses.

    let value = 0;

    function setup() {
      createCanvas(100, 100);

      describe(
        'A gray square with a black square at its center. The inner square turns white when the user presses and releases the left arrow key. It turns black when the user presses and releases the right arrow key.'
      );
    }

    function draw() {
      background(200);

      // Style the square.
      fill(value);

      // Draw the square.
      square(25, 25, 50);
    }

    // Toggle the background color when the user releases an arrow key.
    function keyReleased() {
      if (keyCode === LEFT_ARROW) {
        value = 255;
      } else if (keyCode === RIGHT_ARROW) {
        value = 0;
      }
      // Uncomment to prevent any default behavior.
      // return false;
    }
    </code>
    </div>
class: p5
params:
  - name: event
    description: |
      <p>optional <code>KeyboardEvent</code> callback argument.</p>
    type: KeyboardEvent
    optional: true
chainable: false
---


# keyReleased
